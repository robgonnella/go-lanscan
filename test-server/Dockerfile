################################################################################
# Build
################################################################################
FROM golang:1.21-alpine3.18 as builder

WORKDIR /app

COPY main.go go.mod ./

RUN go build -ldflags '-s -w'

################################################################################
# Final
################################################################################
FROM alpine:3.18

COPY --from=builder /app/test-server /test-server

ENTRYPOINT [ "/test-server" ]
